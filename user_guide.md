# Clash for Linux æ ‡å‡†ä½¿ç”¨æŒ‡å—

æ ¹æ®åŽŸä½œè€…çš„è®¾è®¡æ„å›¾åŠä»£ç é€»è¾‘ï¼Œæœ¬é¡¹ç›®æ˜¯ä¸€å¥—**â€œé…ç½®å³ä»£ç â€**çš„è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·ã€‚ä»¥ä¸‹æ˜¯æ ‡å‡†çš„ä½¿ç”¨æµç¨‹ï¼š

## 1. éƒ¨ç½²ä¸Žå®‰è£… (ä¸€æ¬¡æ€§)

### ðŸ“Œ æ ¸å¿ƒç†å¿µ
ä½œè€…æŽ¨å´‡**è„šæœ¬åŒ–éƒ¨ç½²**ï¼Œé¿å…æ‰‹åŠ¨ä¸‹è½½åˆ†å‘ã€‚

1.  **å‡†å¤‡é…ç½®**ï¼šä¿®æ”¹ `.env` æ–‡ä»¶ï¼Œå¡«å…¥è®¢é˜…åœ°å€ (`CLASH_URL`)ã€‚
    *   *è¿›é˜¶*ï¼šé…ç½® `CLASH_SECRET` ä»¥å¢žå¼ºå®‰å…¨æ€§ã€‚
3.  **é…ç½®æ–‡ä»¶ (å¯é€‰)**ï¼š
    *   é¡¹ç›®æä¾›äº† `conf/config.yaml.example` ä½œä¸ºå‚è€ƒã€‚
    *   å¦‚éœ€è‡ªå®šä¹‰é«˜çº§é…ç½®ï¼ˆå¦‚ç«¯å£ã€DNSï¼‰ï¼Œè¯·å¤åˆ¶ä¸º `conf/config.yaml` å¹¶ä¿®æ”¹ã€‚
4.  **æ‰§è¡Œå®‰è£…**ï¼š
    ```bash
    sudo bash install.sh
    ```
    *   è„šæœ¬ä¼šè‡ªåŠ¨è¯†åˆ«æž¶æž„ã€ä¸‹è½½å†…æ ¸ï¼ˆçŽ°å·²å‡çº§ä¸º Mihomoï¼‰ã€é…ç½® systemd æœåŠ¡ã€‚

## 2. æ—¥å¸¸ç®¡ç† (SysAdmin é£Žæ ¼)

### ðŸš€ æœåŠ¡æŽ§åˆ¶
é¡¹ç›®æ·±åº¦é›†æˆ `systemd`ï¼Œè¯·ä½¿ç”¨æ ‡å‡†æœåŠ¡å‘½ä»¤ï¼š
```bash
sudo systemctl start clash-for-linux   # å¯åŠ¨
sudo systemctl stop clash-for-linux    # åœæ­¢
sudo systemctl restart clash-for-linux # é‡å¯ï¼ˆé…ç½®ä¿®æ”¹åŽå¿…é¡»é‡å¯ï¼‰
sudo systemctl status clash-for-linux  # æŸ¥çœ‹çŠ¶æ€
```

### ðŸŽ® å‘½ä»¤è¡Œå·¥å…· `clashctl` (æŽ¨è)
ä½œè€…å°è£…äº†å¿«æ·å‘½ä»¤ `clashctl`ï¼Œé€‚åˆå¿«é€Ÿæ“ä½œï¼š
-   `clashctl status`ï¼šæ£€æŸ¥è¿è¡ŒçŠ¶æ€
-   `clashctl update`ï¼šæ›´æ–°è®¢é˜…
-   `clashctl restart`ï¼šé‡å¯æœåŠ¡
-   **å¤šè®¢é˜…åˆ‡æ¢**ï¼š
    ```bash
    clashctl sub add my-home "https://..."   # æ·»åŠ 
    clashctl sub use my-home                 # åˆ‡æ¢
    ```

## 3. ç»ˆç«¯ä»£ç† (Shellé›†æˆ)

å®‰è£…åŽä¼šè‡ªåŠ¨ç”Ÿæˆ `/etc/profile.d/clash-for-linux.sh`ã€‚
åœ¨ç»ˆç«¯ä¸­å¯ç”¨ä»£ç†çš„æ ‡å‡†å§¿åŠ¿ï¼š

```bash
# 1. åŠ è½½çŽ¯å¢ƒå˜é‡ (æ–°å¼€ç»ˆç«¯é»˜è®¤åŠ è½½ï¼Œå½“å‰ç»ˆç«¯éœ€æ‰‹åŠ¨)
source /etc/profile.d/clash-for-linux.sh

# 2. å¼€å¯ä»£ç†
proxy_on

# 3. æ£€æŸ¥
curl google.com

# 4. å…³é—­
proxy_off
```

## 4. Web æŽ§åˆ¶é¢æ¿

é»˜è®¤ä»…ç›‘å¬ `127.0.0.1:9090` ä¸ºäº†å®‰å…¨ã€‚

### ðŸŒ è®¿é—®æ–¹å¼
1.  **æœ¬æœºæµè§ˆå™¨**ï¼šç›´æŽ¥è®¿é—® `http://127.0.0.1:9090/ui`
2.  **è¿œç¨‹/WSL è®¿é—®**ï¼šå»ºè®®ä½¿ç”¨ SSH éš§é“æ˜ å°„ç«¯å£ï¼Œè€Œä¸æ˜¯ç›´æŽ¥æš´éœ²åˆ°å…¬ç½‘ã€‚
    ```bash
    # åœ¨æ‚¨çš„æœ¬æœºç»ˆç«¯æ‰§è¡Œ
    ssh -L 9090:127.0.0.1:9090 user@server_ip
    ```

## ðŸ’¡ æœ€ä½³å®žè·µæ€»ç»“
-   **é…ç½®å˜æ›´**ï¼šä¿®æ”¹ `.env` æˆ– `conf/config.yaml` -> `sudo systemctl restart clash-for-linux`ã€‚
-   **è®¢é˜…æ›´æ–°**ï¼š`sudo clashctl update`ã€‚
-   **è°ƒè¯•é—®é¢˜**ï¼š`sudo journalctl -u clash-for-linux -n 50`ã€‚
